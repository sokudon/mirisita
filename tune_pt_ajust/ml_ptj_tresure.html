<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0054)http://sokudon.s17.xrea.com/million_live_rtb_calc.html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="./dt_json/tbl.css" type="text/css" rel="stylesheet">
<link rel="stylesheet" href="./dt_json/style.css" type="text/css" media="print, projection, screen" />
<script src="./dt_json/jquery-latest.js" type="text/javascript"></script> 
<script src="./dt_json/jquery.tablesorter.min.js" type="text/javascript"></script> <style type="text/css">
<style type="text/css">
<!--
textarea {
max-width:400px;
max-height:200px;
resize: none;
}
-->
</style>
<title>みりますPT(とれじゃー)</title>
</head>
<body style="">
<!--日付変更にmomentjisを使用、ろーかるで動かすにはhttp://momentjs.com/　が必要-->
<script async="" src="./pttresure.js"></script> <!--/ppp.txt-->
<script type="text/javascript">

var eregaset=[
[2571,"2MX3"],
[2616,"4MX3"],
[2655,"6MX3"],
[2700,"MMX3"],
];


function stringfilter() {
st="";
var target=document.getElementById("val").value;
st="<table id=\"sampleTable\" class=\"tablesorter\"><thead><tr><th>2M　</th><th>4M　</th><th>6M　</th><th>MM　</th><th>LAST　</th><th>曲回数　</th></tr></thead><tbody>";

var div=0;
var ibept=0;
var ibeindex=$("#taleset").attr("selectedIndex");
document.getElementById("ptset").innerHTML=eregaset[ibeindex][0];
ibept= eregaset[ibeindex][0];


if(document.getElementById("ibe").checked){

div=Math.floor(target/ibept);
target = target - div*ibept;
if(target!=0){
if(target<150 && div>0){
target +=ibept;
div--;
}}}


var ptt={"2M":107,"4M":122,"6M":135,"MM":150,"EREGASET":ibept};
var pts;

var m= eregaset[ibeindex][1].match(/X[0-9]/gm);
var song=0;
for(var i=0;i<m.length;i++){
song +=parseInt(m[i].match(/[0-9]/));
}
var eregasong=div*(song+1);
var total=(pat[i][0]+pat[i][1]+pat[i][2]+pat[i][3]);
var totalerega=total+eregasong;

for(var i=0;i<pat.length;i++){
if(target==pat[i][4]){

total=(pat[i][0]+pat[i][1]+pat[i][2]+pat[i][3]);
totalerega=total+eregasong;

pts= ptt["2M"]*pat[i][0]+ptt["4M"]*pat[i][1]+ptt["6M"]*pat[i][2]+ptt["MM"]*pat[i][3]; 
st += "<tr><td>" + pat[i][0] +"</td><td>" +  pat[i][1] +"</td><td>" +  pat[i][2] +"</td><td>" + pat[i][3] +"</td><td>" + div+"</td><td>"+totalerega+";"+total+"+LAST"+div+"("+eregasong+")</td></tr>";
}}
st +="</tbody></table>";
st += "イベ曲以外のこり:" +pts;


document.getElementById("tbl").innerHTML=st;

var backsort=currentSort;
$.tablesorter.defaults.widgets = ['zebra'];
$("#sampleTable").tablesorter(
{
sortList: backsort,
headers: {
}}
).bind("sortEnd",
        function(sorter) {
            currentSort = sorter.target.config.sortList;
        });
return;
}
    
window.onload = function () {
 $("#sampleTable").tablesorter({
    widthFixed: false
    }
    );
};
        

var currentSort=[[6,0]];//ぼだ
    -->
    </script>
<h1>みりますれいんぼうPTさーちとれじゃーばん　</h1>
PTポイント（1.5倍時のみ）；{"2M",107,"4M":122,"6M":135,"MM":150,"SET":<span id="ptset">2571</span>}<br>
<label for="val">検索スコア:<input type="text" id="val" value="3000"><br></label>
<label for="ibe">LAST+ALLライブ曲のみも入れる<input type="checkbox" checked="checked" id="ibe"><br></label>
<select name="tale" id="taleset" onChange="stringfilter()">
<option selected="selected">2Mx3</option>
<option>4Mx3</option>
<option>6Mx3</option>
<option>MMx3</option>
</select>

<input type="Submit" value="Convert" generate"="" onclick="stringfilter();return false">
</form>
<div id="tbl">
<table id="sampleTable" class="tablesorter">
<thead><tr><th>2M　</th><th>4M　</th><th>6M　</th><th>MM　</th><th>LAST　</th><th>曲回数</th></tr></thead>
</table>
</div>
<h2><a href="https://docs.google.com/spreadsheets/d/19BlYI2MQdNetcjw-x8xvjnYg9ZzO7hg1Z5AZ105Vh0U/edit#gid=2136639685">スプレッドシート版（コピーして使う,調整方法も掲載中）</a></h2>
</body></html>